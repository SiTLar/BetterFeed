!function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={exports:{},id:o,loaded:!1};return e[o].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){n(6);var o=n(1),r=[n(3)];o.init(),o.loadSettings().then(function(e){for(var t in e)e.hasOwnProperty(t)&&e[t]===!0&&r.push(n(2)("./"+t));var o=new MutationObserver(function(e){e.forEach(function(e){var t,n,o;for(t=0,n=e.addedNodes.length;n>t;t++)o=e.addedNodes[t],o.nodeType==Node.ELEMENT_NODE&&r.forEach(function(e){e(o)})})});r.forEach(function(e){e()}),o.observe(document.body,{childList:!0,subtree:!0})})},function(e,t,n){var o=function(e){var t=["fix-names","fold-comments"];e=e||{};var n={};return t.forEach(function(t){n[t]=t in e?e[t]:!0}),n},r={init:function(){},loadSettings:function(){return new Promise(function(e){setTimeout(function(){e(o())},0)})},saveSettings:function(e){return new Promise(function(e){setTimeout(e,0)})}},i={init:function(){var e=this;window.addEventListener("message",function(t){if("action"in t.data&&"getSettings"===t.data.action&&e.loadSettings().then(function(e){t.source.postMessage(e,t.origin)}),"action"in t.data&&"saveSettings"===t.data.action&&e.saveSettings(t.data.value),"action"in t.data&&"checkUpdates"===t.data.action){var n=Date.now(),o=localStorage["be-fe-version"];localStorage["be-fe-next-update"]=n+36e5;var r=new XMLHttpRequest;r.open("GET","https://api.github.com/repos/davidmz/BetterFeed/tags?page=1&&per_page=1"),r.responseType="json",r.onload=function(){try{var e=this.response;if(1==e.length&&"name"in e[0]){var t=e[0].name;localStorage["be-fe-version"]=t,localStorage["be-fe-next-update"]=n+864e5,alert(t!=o?"Доступна новая версия: "+t+". Она будет установлена после перезагрузки страницы.":"У вас установлена последняя версия")}}catch(r){}},r.send()}})},loadSettings:function(){return new Promise(function(e){var t;try{t=o(JSON.parse(localStorage["ffc-sac-settings"]))}catch(n){t=o()}e(t)})},saveSettings:function(e){return localStorage["ffc-sac-settings"]=JSON.stringify(e),new Promise(function(e){setTimeout(e,0)})}},a={init:function(){var e=this;this.loadResolver=null,this.parentOrigin="https://freefeed.net",window.addEventListener("message",function(t){t.origin===e.parentOrigin&&null!==e.loadResolver&&(e.loadResolver(o(t.data)),e.loadResolver=null)})},loadSettings:function(){var e=this;return new Promise(function(t){e.loadResolver=t,window.parent.postMessage({action:"getSettings",value:null},e.parentOrigin)})},saveSettings:function(e){var t=this;return new Promise(function(n){window.parent.postMessage({action:"saveSettings",value:e},t.parentOrigin),setTimeout(n,0)})}};"freefeed.net"===location.hostname?e.exports=i:window.parent?e.exports=a:e.exports=r},function(e,t,n){function o(e){return n(r(e))}function r(e){return i[e]||function(){throw new Error("Cannot find module '"+e+"'.")}()}var i={"./fix-names":4,"./fix-names.js":4,"./fold-comments":5,"./fold-comments.js":5,"./settings-link":3,"./settings-link.js":3};o.keys=function(){return Object.keys(i)},o.resolve=r,e.exports=o,o.id=2},function(e,t,n){var o=n(8);n(9);var r=o(".light-box-container.be-fe-settingsLB"),i=o(".frf-co-light-box.hidden",o(".light-box-shadow",r));e.exports=function(e){var t=localStorage["be-fe-version"];if(t){e=e||document.body;var n=e.querySelector(".sidebar");if(n&&!n.querySelector(".be-fe-settingsLink")){var a;n.appendChild(o(".box.be-fe-settingsLink",o("div",a=o("a","BetterFeed settings")),o("div",o("small",t)))),a.addEventListener("click",function(e){e.preventDefault(),document.body.appendChild(i),r.innerHTML="",r.appendChild(o("iframe.light-box-iframe",{src:"https://cdn.rawgit.com/davidmz/BetterFeed/"+t+"/src/options/options.html",frameborder:"0"})),i.classList.remove("hidden")})}}}},function(e,t,n){var o=n(12);e.exports=function(e){e=e||document.body,o(e,".post-body > .title a:not(.be-fe-nameFixed), .p-comment-body .author a:not(.be-fe-nameFixed), .p-timeline-user-like > a:not(.be-fe-nameFixed)",function(e){var t=e.getAttribute("href").substr(1),n=e.innerHTML;e.innerHTML=t,e.setAttribute("title",n),e.classList.add("be-fe-nameFixed")})}},function(e,t,n){var o=n(12),r=n(8);e.exports=function(e){e=e||document.body,o(e,".p-timeline-post > .comments",function(e){var t,n=e.querySelectorAll(":scope > .ember-view"),o=n.length;for(t=0;o>t;t++)o>7&&t>0&&o-1>t?n[t].classList.add("be-fe-comment-folded"):n[t].classList.remove("be-fe-comment-folded");if(!(7>=o)){var i=e.querySelector(".be-fe-comments-fold-handle");if(i)i.querySelector("a").innerHTML=o-2+" more comments";else{var a=r("a",o-2+" more comments");i=r(".be-fe-comments-fold-handle",a),a.addEventListener("click",function(t){t.preventDefault(),e.classList.add("be-fe-comments-expanded")})}e.insertBefore(i,n[1])}})}},function(e,t,n){var o=n(7);"string"==typeof o&&(o=[[e.id,o,""]]);n(11)(o,{});o.locals&&(e.exports=o.locals)},function(e,t,n){t=e.exports=n(13)(),t.push([e.id,".be-fe-comments-fold-handle{font-style:italic;margin-left:21px}.be-fe-comment-folded{display:none}.be-fe-comments-expanded .be-fe-comment-folded{display:block}.be-fe-comments-expanded .be-fe-comments-fold-handle{display:none}",""])},function(e,t,n){e.exports=function(e,t,n){var o,r,i=e.split("."),a=i.shift()||"div",s=document.createElement(a);i.length>0&&(s.className=i.join(" "));var c=1;if(arguments.length>1&&"object"==typeof t&&!(t instanceof Node)){for(r in t)t.hasOwnProperty(r)&&s.setAttribute(r,t[r]);c=2}if(arguments.length>c)for(o=c;o<arguments.length;o++){var f=arguments[o];f instanceof Node?s.appendChild(f):"string"==typeof f&&s.appendChild(document.createTextNode(f))}return s}},function(e,t,n){var o=n(10);"string"==typeof o&&(o=[[e.id,o,""]]);n(11)(o,{});o.locals&&(e.exports=o.locals)},function(e,t,n){t=e.exports=n(13)(),t.push([e.id,'.frf-co-light-box.first .light-box-arrow.left,.frf-co-light-box.hidden,.frf-co-light-box.last .light-box-arrow.right{display:none}.light-box-arrow{position:absolute;left:0;top:50%;margin-top:-60px;width:90px;height:120px;color:#fff;cursor:pointer}.light-box-arrow:hover{background:rgba(255,255,255,.1)}.light-box-arrow::before{content:"";position:absolute;left:20px;top:50%;margin-top:-15px;width:30px;height:30px;border-top:5px solid;border-right:5px solid;-webkit-transform:rotate(45deg);transform:rotate(45deg)}.light-box-arrow.left::before{left:auto;right:20px;-webkit-transform:rotate(-135deg);transform:rotate(-135deg)}.light-box-arrow.right{left:auto;right:0}.light-box-shadow{position:fixed;top:0;left:0;width:100%;height:100%;display:-webkit-flex;display:flex;-webkit-justify-content:center;justify-content:center;-webkit-align-items:center;align-items:center;z-index:100;cursor:zoom-out;background:rgba(0,0,0,.4)}.light-box-container{width:90%;height:90%;display:-webkit-flex;display:flex;-webkit-justify-content:center;justify-content:center;-webkit-align-items:center;align-items:center}.light-box-img{border:1px solid #000;box-shadow:1px 1px 10px rgba(0,0,0,.5);max-width:100%;max-height:100%;margin:auto;background-color:#fff;cursor:pointer}.light-box-iframe{background:#fff;width:100%;height:100%}.light-box-thumbnail{cursor:zoom-in}',""])},function(e,t,n){function o(e,t){for(var n=0;n<e.length;n++){var o=e[n],r=l[o.id];if(r){r.refs++;for(var i=0;i<r.parts.length;i++)r.parts[i](o.parts[i]);for(;i<o.parts.length;i++)r.parts.push(s(o.parts[i],t))}else{for(var a=[],i=0;i<o.parts.length;i++)a.push(s(o.parts[i],t));l[o.id]={id:o.id,refs:1,parts:a}}}}function r(e){for(var t=[],n={},o=0;o<e.length;o++){var r=e[o],i=r[0],a=r[1],s=r[2],c=r[3],f={css:a,media:s,sourceMap:c};n[i]?n[i].parts.push(f):t.push(n[i]={id:i,parts:[f]})}return t}function i(){var e=document.createElement("style"),t=h();return e.type="text/css",t.appendChild(e),e}function a(){var e=document.createElement("link"),t=h();return e.rel="stylesheet",t.appendChild(e),e}function s(e,t){var n,o,r;if(t.singleton){var s=g++;n=m||(m=i()),o=c.bind(null,n,s,!1),r=c.bind(null,n,s,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=a(),o=d.bind(null,n),r=function(){n.parentNode.removeChild(n),n.href&&URL.revokeObjectURL(n.href)}):(n=i(),o=f.bind(null,n),r=function(){n.parentNode.removeChild(n)});return o(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;o(e=t)}else r()}}function c(e,t,n,o){var r=n?"":o.css;if(e.styleSheet)e.styleSheet.cssText=v(t,r);else{var i=document.createTextNode(r),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(i,a[t]):e.appendChild(i)}}function f(e,t){var n=t.css,o=t.media;t.sourceMap;if(o&&e.setAttribute("media",o),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function d(e,t){var n=t.css,o=(t.media,t.sourceMap);o&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var r=new Blob([n],{type:"text/css"}),i=e.href;e.href=URL.createObjectURL(r),i&&URL.revokeObjectURL(i)}var l={},u=function(e){var t;return function(){return"undefined"==typeof t&&(t=e.apply(this,arguments)),t}},p=u(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),h=u(function(){return document.head||document.getElementsByTagName("head")[0]}),m=null,g=0;e.exports=function(e,t){t=t||{},"undefined"==typeof t.singleton&&(t.singleton=p());var n=r(e);return o(n,t),function(e){for(var i=[],a=0;a<n.length;a++){var s=n[a],c=l[s.id];c.refs--,i.push(c)}if(e){var f=r(e);o(f,t)}for(var a=0;a<i.length;a++){var c=i[a];if(0===c.refs){for(var d=0;d<c.parts.length;d++)c.parts[d]();delete l[c.id]}}}};var v=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}()},function(e,t,n){e.exports=function(e,t,n){for(var o=e.querySelectorAll(t),r=0,i=o.length;i>r;r++)n(o[r])}},function(e,t,n){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var n=this[t];e.push(n[2]?"@media "+n[2]+"{"+n[1]+"}":n[1])}return e.join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var o={},r=0;r<this.length;r++){var i=this[r][0];"number"==typeof i&&(o[i]=!0)}for(r=0;r<t.length;r++){var a=t[r];"number"==typeof a[0]&&o[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),e.push(a))}},e}}]);