!function(e){function t(o){if(n[o])return n[o].exports;var i=n[o]={exports:{},id:o,loaded:!1};return e[o].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){n(18);var o=n(1),i=[n(2),n(4)];o.init(),o.loadSettings().then(function(e){for(var t in e)e.hasOwnProperty(t)&&e[t]===!0&&i.push(n(3)("./"+t));var o=new MutationObserver(function(t){t.forEach(function(t){var n,o,r;for(n=0,o=t.addedNodes.length;o>n;n++)r=t.addedNodes[n],r.nodeType==Node.ELEMENT_NODE&&i.forEach(function(t){t(r,e)})})});i.forEach(function(t){t(void 0,e)}),o.observe(document.body,{childList:!0,subtree:!0})})},function(e,t,n){var o=n(20),i=function(e){var t=["fix-names","lightboxed-images","bottom-comment-link","colored-comment-icons","at-links","comment-icons-click","animated-gif","textarea-fix","where-this-post-from","userpics-in-comments","embed-ly","hide-aliens","hide"];e=e||{};var n={};return t.forEach(function(t){n[t]=t in e?e[t]:!0}),n},r={init:function(){},loadSettings:function(){return new Promise(function(e){setTimeout(function(){e(i())},0)})},saveSettings:function(e){return new Promise(function(e){setTimeout(e,0)})}},s={init:function(){var e=this;window.addEventListener("message",function(t){if("object"==typeof t.data&&"action"in t.data&&("getSettings"===t.data.action&&e.loadSettings().then(function(e){t.source.postMessage(e,t.origin)}),"saveSettings"===t.data.action&&e.saveSettings(t.data.value),"getBanList"===t.data.action&&t.source.postMessage(o.get(),t.origin),"saveBanList"===t.data.action&&o.set(t.data.value),"checkUpdates"===t.data.action)){var n=Date.now(),i=localStorage["be-fe-version"];localStorage["be-fe-next-update"]=n+36e5;var r=new XMLHttpRequest;r.open("GET","https://api.github.com/repos/davidmz/BetterFeed/tags?page=1&&per_page=1"),r.responseType="json",r.onload=function(){try{var e=this.response;if(1==e.length&&"name"in e[0]){var t=e[0].name;localStorage["be-fe-version"]=t,localStorage["be-fe-next-update"]=n+864e5,alert(t!=i?"Доступна новая версия: "+t+". Она будет установлена после перезагрузки страницы.":"У вас установлена последняя версия")}}catch(o){}},r.send()}})},loadSettings:function(){return new Promise(function(e){var t;try{t=i(JSON.parse(localStorage["ffc-sac-settings"]))}catch(n){t=i()}e(t)})},saveSettings:function(e){return localStorage["ffc-sac-settings"]=JSON.stringify(e),new Promise(function(e){setTimeout(e,0)})}},a={init:function(){var e=this;this.loadResolver=null,this.parentOrigin="https://freefeed.net",window.addEventListener("message",function(t){t.origin===e.parentOrigin&&null!==e.loadResolver&&(e.loadResolver(i(t.data)),e.loadResolver=null)})},loadSettings:function(){var e=this;return new Promise(function(t){e.loadResolver=t,window.parent.postMessage({action:"getSettings",value:null},e.parentOrigin)})},saveSettings:function(e){var t=this;return new Promise(function(n){window.parent.postMessage({action:"saveSettings",value:e},t.parentOrigin),setTimeout(n,0)})}};"freefeed.net"===location.hostname?e.exports=s:window.parent?e.exports=a:e.exports=r},function(e,t,n){var o=n(21);n(25);var i=o(".light-box-container.be-fe-settingsLB"),r=o(".frf-co-light-box.hidden",o(".light-box-shadow",i)),s=localStorage["be-fe-version"];setInterval(function(){var e=document.querySelector(".be-fe-settingsLink");e&&(localStorage["be-fe-version"]===s?e.classList.remove("be-fe-have-upgrade"):e.classList.add("be-fe-have-upgrade"))},2e3),r.addEventListener("click",function(){i.innerHTML="",r.classList.add("hidden")}),e.exports=function(e){if(s){e=e||document.body;var t=e.querySelector(".sidebar");if(t&&!t.querySelector(".be-fe-settingsLink")){var n;t.appendChild(o(".box.be-fe-settingsLink",o("div",n=o("a","BetterFeed settings")),o("div",o("small",s),o("i.fa.fa-arrow-circle-up",{title:"Доступно обновление, перезагрузите страницу"})))),n.addEventListener("click",function(e){e.preventDefault(),document.body.appendChild(r),i.innerHTML="",i.appendChild(o("iframe.light-box-iframe",{src:"https://cdn.rawgit.com/davidmz/BetterFeed/"+s+"/src/options/options.html",frameborder:"0"})),r.classList.remove("hidden")})}}}},function(e,t,n){function o(e){return n(i(e))}function i(e){return r[e]||function(){throw new Error("Cannot find module '"+e+"'.")}()}var r={"./animated-gif":5,"./animated-gif.js":5,"./at-links":6,"./at-links.js":6,"./bottom-comment-link":7,"./bottom-comment-link.js":7,"./colored-comment-icons":8,"./colored-comment-icons.js":8,"./comment-icons-click":9,"./comment-icons-click.js":9,"./comments-common":4,"./comments-common.js":4,"./embed-ly":10,"./embed-ly.js":10,"./fix-names":11,"./fix-names.js":11,"./hide":13,"./hide-aliens":12,"./hide-aliens.js":12,"./hide.js":13,"./lightboxed-images":14,"./lightboxed-images.js":14,"./settings-link":2,"./settings-link.js":2,"./textarea-fix":15,"./textarea-fix.js":15,"./userpics-in-comments":16,"./userpics-in-comments.js":16,"./where-this-post-from":17,"./where-this-post-from.js":17};o.keys=function(){return Object.keys(r)},o.resolve=i,e.exports=o,o.id=3},function(e,t,n){var o=n(22),i=n(23),r=n(24),s=null;e.exports=function(e){e=e||document.body;var t=e.querySelector(".logged-user .author a");t&&(s=t.getAttribute("href").substr(1)),o(e,".post-body",function(e){var t=e.querySelector(".title a").getAttribute("href").substr(1);o(e,".comment:not(.be-fe-comment-from)",function(e){var n=e.querySelector(".author a");if(n){var o=n.getAttribute("href").substr(1);r.ready.then(function(t){var n=t.whoIs(o);n===r.ME?e.classList.add("be-fe-comment-from-me"):n===r.FRIEND?e.classList.add("be-fe-comment-from-friend"):n===r.READER?e.classList.add("be-fe-comment-from-reader"):n===r.STRANGER}),o==t&&e.classList.add("be-fe-comment-from-post-author"),e.classList.add("be-fe-comment-from"),e.classList.add("be-fe-comment-from-u-"+o),e.dataset.author=o}})}),o(e,".comment:not(.be-fe-comment-from)",function(e){var t=i(e,".post-body");if(t){var n=i(e,".post-body").querySelector(".title a").getAttribute("href").substr(1),o=e.querySelector(".author a");if(o){var r=o.getAttribute("href").substr(1);r==s?e.classList.add("be-fe-comment-from-me"):r==n&&e.classList.add("be-fe-comment-from-post-author"),e.classList.add("be-fe-comment-from"),e.classList.add("be-fe-comment-from-u-"+r),e.dataset.author=r}}})}},function(e,t,n){function o(e){if(!e.src.match(/^data:/)){var t=document.createElement("canvas"),n=t.width=e.width,o=t.height=e.height;t.getContext("2d").drawImage(e,0,0,n,o),e.src=t.toDataURL()}}function i(e){return new Promise(function(t,n){var o=new XMLHttpRequest;o.open("GET",e,!0),o.responseType="arraybuffer",o.addEventListener("load",function(){var e,i,r=new Uint8Array(o.response),s=r.length,a=0;if(71!==r[0]||73!==r[1]||70!==r[2]||56!==r[3])return void n();for(e=0,i=s-9;i>e&&2>a;e++)0!==r[e]||33!==r[e+1]||249!==r[e+2]||4!==r[e+3]||0!==r[e+8]||44!==r[e+9]&&33!==r[e+9]||a++;(a>1?t:n)()}),o.send()})}var r=n(22);e.exports=function(e){e=e||document.body,r(e,"img.p-attachment-thumbnail[src^='https://freefeed.net/'][src$='.gif']:not(.be-fe-gif)",function(e){e.classList.add("be-fe-gif"),i(e.src).then(function(){e.parentNode.classList.add("be-fe-gif-ani"),e.complete?o(e):e.addEventListener("load",o.bind(null,e))},function(){})})}},function(e,t,n){var o=n(22),i=n(21),r=n(23);e.exports=function(e){e=e||document.body,o(e,".comment-text, .post-body > .body > .text",function(e){for(var t=e.firstChild;t;){if(t.nodeType==Node.TEXT_NODE&&/\B@([a-z0-9_]+)/.test(t.nodeValue)){for(var n,o=/\B@([a-z0-9_]+)/g,r=t.nodeValue,s=document.createDocumentFragment(),c=0;null!==(n=o.exec(r));){var d=n[0],f=n[1],l=n.index;s.appendChild(document.createTextNode(r.substr(c,l-c))),c=l+d.length;var u=s.appendChild(i("a.be-fe-at-link",{href:"/"+f},d));a(u,".be-fe-comment-from-u-"+f)}var h=s.appendChild(document.createTextNode(r.substr(c)));e.insertBefore(s,t),e.removeChild(t),t=h}t=t.nextSibling}}),o(e,".comment-text",function(e){for(var t=e.firstChild;t;){if(t.nodeType==Node.TEXT_NODE&&/[↑^]/.test(t.nodeValue)){for(var n,o=/↑+|\^+W?/g,c=t.nodeValue,d=document.createDocumentFragment(),f=0;null!==(n=o.exec(c));){var l=n[0],u=n.index;if("^W"!==l){d.appendChild(document.createTextNode(c.substr(f,u-f))),f=u+l.length;var h=d.appendChild(i("span.be-fe-ups",l)),m=s(r(e,".ember-view"),l.length);m&&a(h,"#"+m.id)}}var p=d.appendChild(document.createTextNode(c.substr(f)));e.insertBefore(d,t),e.removeChild(t),t=p}t=t.nextSibling}})};var s=function(e,t){for(var n=null;;){if(e=e.previousElementSibling,!e)break;if(e.classList.contains("ember-view")&&(t--,0==t)){n=e;break}}return n},a=function(e,t){e.dataset.hlSelector||(e.dataset.hlSelector=t,e.addEventListener("mouseover",c),e.addEventListener("mouseout",d))},c=function(e){var t;(t=e.target.dataset.hlSelector)&&o(r(e.target,".comments"),t,function(e){e.classList.add("be-fe-comment-hl")})},d=function(e){o(r(e.target,".comments"),".be-fe-comment-hl",function(e){e.classList.remove("be-fe-comment-hl")})}},function(e,t,n){var o=n(22),i=n(21),r=n(23);e.exports=function(e){e=e||document.body,o(e,".p-timeline-post-comment-action:not(.be-fe-copied)",function(e){e.classList.add("be-fe-copied");var t=r(e,".post-body");if(t){var n=e.cloneNode();n.innerHTML="Add comment";var o=i(".be-fe-bottom-comment-link",n);t.querySelector(".comments").appendChild(o)}})}},function(e,t,n){n(30);var o=n(22),i=n(21);e.exports=function(e){e=e||document.body,o(e,".comment .date:not(.be-fe-iconized)",function(e){e.classList.add("be-fe-iconized"),e.appendChild(i("i.fa.fa-comment.icon.be-fe-ico-bg"))})}},function(e,t,n){var o=n(23);e.exports=function(e){void 0===e&&document.body.addEventListener("click",i,!1)};var i=function(e){if((e.target.matches(".comment .date")||e.target.parentNode.matches(".comment .date"))&&0==e.button){e.preventDefault();var t=null;if(e.metaKey||e.ctrlKey){var n=o(e.target,".ember-view"),i=1;for(n=n.nextElementSibling;n;)n.classList.contains("ember-view")&&i++,n=n.nextElementSibling;t=new Array(i+1).join("^")}var r=o(e.target,".comment").dataset.author,s=o(e.target,".post-body"),a=s.querySelector("textarea");if(!a){var c=s.querySelector(".p-timeline-post-comment-action");c&&(c.click(),a=s.querySelector("textarea"))}a&&(t?a.value+=t+" "+(e.shiftKey?"this":""):r&&(a.value+="@"+r+" "),a.focus(),a.selectionStart=a.selectionEnd=a.value.length)}}},function(e,t,n){var o=n(22),i=n(21);e.exports=function(e,t){e||(!function(e,t){var n="embedly-platform",o="script";if(!t.getElementById(n)){e.embedly=e.embedly||function(){(e.embedly.q=e.embedly.q||[]).push(arguments)};var i=t.createElement(o);i.id=n,i.async=1,i.src="https://cdn.embedly.com/widgets/platform.js";var r=t.getElementsByTagName(o)[0];r.parentNode.insertBefore(i,r)}}(window,document),embedly("on","card.rendered",function(e){e.style.margin="10px 0"})),e=e||document.body,o(e,".post-body",function(e){e.querySelector(":scope > .attachments")||o(e,".text a").some(function(t){if(!/^https?:\/\//.test(t.getAttribute("href")))return!1;var n=e.querySelector(":scope > .body").nextSibling;return e.insertBefore(i(".be-fe-embeds",i("a.embedly-card",{href:t.href,"data-card-width":"60%"})),n),!0})})}},function(e,t,n){var o=n(22);e.exports=function(e){e=e||document.body,o(e,".post-body > .title a:not(.be-fe-nameFixed), .p-comment-body .author a:not(.be-fe-nameFixed), .p-timeline-user-like > a:not(.be-fe-nameFixed)",function(e){e.classList.add("be-fe-nameFixed");var t=e.getAttribute("href").substr(1),n=e.innerHTML;e.innerHTML=t,e.setAttribute("title",n)}),o(e,".p-timeline-subscription-user a:not(.be-fe-nameFixed)",function(e){e.classList.add("be-fe-nameFixed");for(var t=e.getAttribute("href").substr(1),n="",o=e.firstChild;o;){if(o.nodeType==Node.TEXT_NODE&&(n=o.nodeValue.replace(/^\s*|\s*$/,""),""!==n)){o.nodeValue=t;break}o=o.nextSibling}""!==n&&e.setAttribute("title",n)})}},function(e,t,n){var o=n(21);setInterval(function(){var e=!!localStorage["be-fe.hide-alien-posts"],t=document.body.querySelector(".be-fe-hide-aliens-switcher input"),n=document.body.querySelector(".posts"),o=document.body.querySelector(".be-fe-hide-aliens-counter");t&&t.checked!==e&&(t.checked=e),n&&n.classList.contains("be-fe-hide-aliens")!==e&&(e?n.classList.add("be-fe-hide-aliens"):n.classList.remove("be-fe-hide-aliens")),o&&n&&(o.innerHTML=n.querySelectorAll(".be-fe-post-from-alien").length)},500),e.exports=function(e,t){if(t["where-this-post-from"]&&"/"===location.pathname&&!document.body.querySelector(".be-fe-hide-aliens-switcher")){var n=null,i=document.body.querySelector(".box-header-timeline");i&&(i.appendChild(o(".be-fe-hide-aliens-switcher",o("label",n=o("input",{type:"checkbox"})," hide non-friends posts (",o("span.be-fe-hide-aliens-counter","0"),")"))),n.addEventListener("change",function(){localStorage["be-fe.hide-alien-posts"]=n.checked?"1":""}),n.checked=!!localStorage["be-fe.hide-alien-posts"])}}},function(e,t,n){var o=n(24),i=n(28),r=n(22),s=n(21),a=n(23),c=n(20),d=null;e.exports=function(e,t){function n(e){return i.post("/v1/users/"+e+"/unsubscribe").then(l.bind(null,e))}function f(e){c.add(e),l(e)}function l(e){d.insertRule(".be-fe-post-from-u-"+e+" { display: none; }",0)}t["where-this-post-from"]&&(e||(d=document.head.appendChild(s("style.be-fe-banlist")).sheet,c.get().forEach(l)),e=e||document.body,r(e,".post-controls > .p-timeline-post-hide-action",function(e){var t=a(e,".timeline-post-container");if(t){var i=t.dataset.postAuthor;i&&o.ready.then(function(t){var r=t.whoIs(i);e.innerHTML="Hide this post";var a=null;r==o.FRIEND?(a=s("a","Unsubscribe from ",s("strong",i)),a.addEventListener("click",n.bind(null,i))):r!=o.ME&&(a=s("a","Hide all posts from ",s("strong",i)),a.addEventListener("click",f.bind(null,i)));var c=s("a","Hide ",s("i.fa.fa-caret-down")),d=null;c.addEventListener("click",function(){d.style.display="none"==d.style.display?"block":"none"});var l=e.nextSibling;e.parentNode.insertBefore(s("span.be-fe-hide-cont",c,d=s(".be-fe-hide-win",s("ul",s("li",e),a?s("li",a):null))),l),d.style.display="none"})}}))}},function(e,t,n){n(25);var o=n(29),i=n(22),r=n(23),s=new o;document.body.addEventListener("click",function(e){var t=r(e.target,".light-box-thumbnail",!0);if(t&&0==e.button){e.preventDefault();var n=[t],o=r(t,".attachments");o&&(n=i(o,".light-box-thumbnail")),s.show(n,t)}},!1),e.exports=function(e){e=e||document.body,i(e,".p-attachment-url:not(.light-box-thumbnail)",function(e){e.dataset.imageSrc?e.classList.add("light-box-thumbnail"):/\.(jpe?g|png|gif)/i.test(e.href)&&(e.dataset.imageSrc=e.href,e.classList.add("light-box-thumbnail"))})}},function(e,t,n){var o=n(23);e.exports=function(e){void 0===e&&(document.addEventListener("keydown",function(e){13===e.keyCode&&"TEXTAREA"==e.target.tagName&&e.target.classList.contains("ember-text-area")&&(e.stopPropagation(),e.preventDefault())},!0),document.addEventListener("keyup",function(e){if(13===e.keyCode&&"TEXTAREA"==e.target.tagName&&e.target.classList.contains("ember-text-area")&&(e.stopPropagation(),e.preventDefault(),""!==e.target.value)){var t=o(e.target,".edit, .create-post");if(t){var n=t.querySelector("button");n&&(n.click(),e.target.style.height="26px")}}},!0),document.addEventListener("input",function(e){"TEXTAREA"==e.target.tagName&&e.target.classList.contains("ember-text-area")&&e.target.scrollHeight>e.target.clientHeight&&e.target.scrollHeight<150&&(e.target.style.height=e.target.scrollHeight+3+"px")}))}},function(e,t,n){n(32);var o=n(22),i=n(34);e.exports=function(e,t){!e&&t["colored-comment-icons"]&&n(35),e=e||document.body,o(e,".comment a.date:not(.be-fe-with-pic)",function(e){e.classList.add("be-fe-with-pic");var t=e.parentNode,n=t.dataset.author;if(n){var o=e.appendChild(new Image);o.className="be-fe-userpic",i.getPic(n).then(function(e){o.src=e})}})}},function(e,t,n){function o(e){return new Promise(function(t,n){var o=new XMLHttpRequest;o.open("GET","/v1/posts/"+e),o.responseType="json",o.setRequestHeader("X-Authentication-Token",localStorage.authToken),o.onload=function(){return"err"in o.response?void n(o.response.err):void t(o.response)},o.send()})}var i=n(24),r=n(22),s=n(21);e.exports=function(e,t){if("/"===location.pathname){e=e||document.body;var n=!t["fix-names"];r(e,".timeline-post-container:not(.be-fe-where-from)",function(e){e.classList.add("be-fe-where-from");var t=e.querySelector(":scope > .avatar > a");if(t){var r=t.getAttribute("href").substr(1),a=e.querySelector("a.datetime").getAttribute("href").match(/^\/.+?\/([\w-]+)/)[1];e.classList.add("be-fe-post-from-u-"+r),e.dataset.postAuthor=r,i.ready.then(function(t){var c=t.whoIs(r);c!==i.ME&&c!==i.FRIEND&&(e.classList.add("be-fe-post-from-alien"),o(a).then(function(o){var r={},a=o.users.map(function(e){return r[e.username]=n?e.screenName:e.username,e.username}).filter(function(e){var n=t.whoIs(e);return n===i.ME||n===i.FRIEND}).filter(function(e,t,n){return n.indexOf(e)===t});if(a.length>0){var c=[];a.length<5?a.forEach(function(e,t){t>0&&c.push(t==a.length-1?" and ":", "),c.push(s("a.be-fe-nameFixed",{href:"/"+e},r[e]))}):(a.slice(0,3).forEach(function(e,t){t>0&&c.push(", "),c.push(s("a.be-fe-nameFixed",{href:"/"+e},r[e]))}),c.push(" and "+(a.length-3)+" other")),e.querySelector(".title > div").appendChild(s("span.be-fe-from-whom"," (via ",c,")"))}}))})}})}}},function(e,t,n){var o=n(19);"string"==typeof o&&(o=[[e.id,o,""]]);n(27)(o,{});o.locals&&(e.exports=o.locals)},function(e,t,n){t=e.exports=n(37)(),t.push([e.id,'.be-fe-bottom-comment-link,.be-fe-comments-fold-handle,.be-fe-in-comments-link{font-style:italic;margin-left:21px}.be-fe-comment-folded{display:none}.be-fe-comments-expanded .be-fe-comment-folded{display:block}.be-fe-bottom-comment-link:first-child,.be-fe-comments-expanded .be-fe-comments-fold-handle,.comment+.be-fe-bottom-comment-link{display:none}.be-fe-comment-hl{background-color:#def}.be-fe-ups{display:inline-block;background:#eee;padding:0 .25em;border-radius:.25em;cursor:default}.p-attachment-url{position:relative;display:inline-block}.p-attachment-url.be-fe-gif-ani::after{content:"▶ GIF";position:absolute;bottom:3px;right:4px;background-color:#069;color:#eee;font-weight:700;padding:.1em .4em;border-radius:3px;font-size:11px}.be-fe-settingsLink .fa{display:none}.be-fe-settingsLink.be-fe-have-upgrade .fa{display:inline;color:#ff4d00;margin-left:.2em}.be-fe-from-whom{font-size:13px}.be-fe-hide-aliens-switcher{float:right;font-size:13px}.be-fe-hide-aliens-switcher label{font-weight:400}.be-fe-hide-aliens .be-fe-post-from-alien{display:none}.be-fe-hide-cont{position:relative}.be-fe-hide-win{position:absolute;left:50%;transform:translateX(-50%);white-space:nowrap;background:#fff;box-shadow:0 3px 10px rgba(0,0,0,.5);top:1em;padding:1em 1em .5em;border-radius:2px;border:1px solid #999;margin-top:10px}.be-fe-hide-win::after,.be-fe-hide-win::before{content:"";position:absolute;top:-10px;left:50%;border-bottom:10px solid #999;border-left:10px solid transparent;border-right:10px solid transparent;margin-left:-10px}.be-fe-hide-win::after{top:-9px;border-bottom:10px solid #fff}.be-fe-hide-win ul{padding-left:1.2em}.be-fe-hide-win li{margin-bottom:.5em}',""])},function(e,t,n){var o=n(38);e.exports={get:function(){var e;try{e=JSON.parse(localStorage["be-fe.banList"])}catch(t){e=[]}return o(e)||(e=[]),e},set:function(e){localStorage["be-fe.banList"]=JSON.stringify(e)},add:function(e){var t=this.get();-1===t.indexOf(e)&&t.push(e),this.set(t)}}},function(e,t,n){function o(e,t){t instanceof Node?e.appendChild(t):i(t)?t.forEach(o.bind(null,e)):"string"==typeof t&&e.appendChild(document.createTextNode(t))}var i=n(38);e.exports=function(e,t,n){var r,s,a=e.split("."),c=a.shift()||"div",d=document.createElement(c);a.length>0&&(d.className=a.join(" "));var f=1;if(arguments.length>1&&"object"==typeof t&&!(t instanceof Node)&&!i(t)){for(s in t)t.hasOwnProperty(s)&&d.setAttribute(s,t[s]);f=2}if(arguments.length>f)for(r=f;r<arguments.length;r++)o(d,arguments[r]);return d}},function(e,t,n){e.exports=function(e,t,n){if(null===e)return[];var o=e.querySelectorAll(t),i=o?Array.prototype.slice.call(o):[];if(n)for(var r=0,s=i.length;s>r;r++)n(i[r]);return i}},function(e,t,n){var o=function(e,t,n){n=n||!1;var i=n?e:e.parentNode;return i&&i.nodeType==Node.ELEMENT_NODE?i.matches(t)?i:o(i,t):null};e.exports=o},function(e,t,n){function o(){this.me=null,this.friends=[],this.readers=[]}var i=n(28),r=n(34);o.ME=1,o.FRIEND=2,o.READER=3,o.STRANGER=4,o.prototype.whoIs=function(e){return e===this.me?o.ME:-1!==this.friends.indexOf(e)?o.FRIEND:-1!==this.readers.indexOf(e)?o.READER:o.STRANGER},o.ready=i.get("/v1/users/whoami").then(function(e){var t=new o;return t.me=e.users.username,r.setPic(e.users.username,e.users.profilePictureMediumUrl),t.friends=e.subscribers.map(function(e){return r.setPic(e.username,e.profilePictureMediumUrl),e.username}),i.get("/v1/users/"+t.me+"/subscribers").then(function(e){return t.readers=e.subscribers.map(function(e){return r.setPic(e.username,e.profilePictureMediumUrl),e.username}),t})}),e.exports=o},function(e,t,n){var o=n(26);"string"==typeof o&&(o=[[e.id,o,""]]);n(27)(o,{});o.locals&&(e.exports=o.locals)},function(e,t,n){t=e.exports=n(37)(),t.push([e.id,'.frf-co-light-box.first .light-box-arrow.left,.frf-co-light-box.hidden,.frf-co-light-box.last .light-box-arrow.right{display:none}.light-box-arrow{position:absolute;left:0;top:50%;margin-top:-60px;width:90px;height:120px;color:#fff;cursor:pointer}.light-box-arrow:hover{background:rgba(255,255,255,.1)}.light-box-arrow::before{content:"";position:absolute;left:20px;top:50%;margin-top:-15px;width:30px;height:30px;border-top:5px solid;border-right:5px solid;-webkit-transform:rotate(45deg);transform:rotate(45deg)}.light-box-arrow.left::before{left:auto;right:20px;-webkit-transform:rotate(-135deg);transform:rotate(-135deg)}.light-box-arrow.right{left:auto;right:0}.light-box-shadow{position:fixed;top:0;left:0;width:100%;height:100%;display:-webkit-flex;display:flex;-webkit-justify-content:center;justify-content:center;-webkit-align-items:center;align-items:center;z-index:100;cursor:zoom-out;background:rgba(0,0,0,.4)}.light-box-container{width:90%;height:90%;display:-webkit-flex;display:flex;-webkit-justify-content:center;justify-content:center;-webkit-align-items:center;align-items:center}.light-box-img{border:1px solid #000;box-shadow:1px 1px 10px rgba(0,0,0,.5);max-width:100%;max-height:100%;margin:auto;background-color:#fff;cursor:pointer}.light-box-iframe{background:#fff;width:100%;height:100%}.light-box-thumbnail{cursor:zoom-in!important}',""])},function(e,t,n){function o(e,t){for(var n=0;n<e.length;n++){var o=e[n],i=l[o.id];if(i){i.refs++;for(var r=0;r<i.parts.length;r++)i.parts[r](o.parts[r]);for(;r<o.parts.length;r++)i.parts.push(a(o.parts[r],t))}else{for(var s=[],r=0;r<o.parts.length;r++)s.push(a(o.parts[r],t));l[o.id]={id:o.id,refs:1,parts:s}}}}function i(e){for(var t=[],n={},o=0;o<e.length;o++){var i=e[o],r=i[0],s=i[1],a=i[2],c=i[3],d={css:s,media:a,sourceMap:c};n[r]?n[r].parts.push(d):t.push(n[r]={id:r,parts:[d]})}return t}function r(){var e=document.createElement("style"),t=m();return e.type="text/css",t.appendChild(e),e}function s(){var e=document.createElement("link"),t=m();return e.rel="stylesheet",t.appendChild(e),e}function a(e,t){var n,o,i;if(t.singleton){var a=b++;n=p||(p=r()),o=c.bind(null,n,a,!1),i=c.bind(null,n,a,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=s(),o=f.bind(null,n),i=function(){n.parentNode.removeChild(n),n.href&&URL.revokeObjectURL(n.href)}):(n=r(),o=d.bind(null,n),i=function(){n.parentNode.removeChild(n)});return o(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;o(e=t)}else i()}}function c(e,t,n,o){var i=n?"":o.css;if(e.styleSheet)e.styleSheet.cssText=g(t,i);else{var r=document.createTextNode(i),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(r,s[t]):e.appendChild(r)}}function d(e,t){var n=t.css,o=t.media;t.sourceMap;if(o&&e.setAttribute("media",o),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function f(e,t){var n=t.css,o=(t.media,t.sourceMap);o&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var i=new Blob([n],{type:"text/css"}),r=e.href;e.href=URL.createObjectURL(i),r&&URL.revokeObjectURL(r)}var l={},u=function(e){var t;return function(){return"undefined"==typeof t&&(t=e.apply(this,arguments)),t}},h=u(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),m=u(function(){return document.head||document.getElementsByTagName("head")[0]}),p=null,b=0;e.exports=function(e,t){t=t||{},"undefined"==typeof t.singleton&&(t.singleton=h());var n=i(e);return o(n,t),function(e){for(var r=[],s=0;s<n.length;s++){var a=n[s],c=l[a.id];c.refs--,r.push(c)}if(e){var d=i(e);o(d,t)}for(var s=0;s<r.length;s++){var c=r[s];if(0===c.refs){for(var f=0;f<c.parts.length;f++)c.parts[f]();delete l[c.id]}}}};var g=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}()},function(e,t,n){function o(e){return new Promise(function(t,n){var o=new XMLHttpRequest;o.open("GET",e),o.responseType="json",o.setRequestHeader("X-Authentication-Token",localStorage.authToken),o.onload=function(){"err"in o.response?n(o.response.err):t(o.response)},o.send()})}function i(e,t){return new Promise(function(n,o){var i=new XMLHttpRequest;i.open("PUT",e),i.responseType="json",i.setRequestHeader("X-Authentication-Token",localStorage.authToken),i.onload=function(){"err"in i.response?o(i.response.err):n(i.response)},i.send(t)})}function r(e,t){return new Promise(function(n,o){var i=new XMLHttpRequest;i.open("POST",e),i.responseType="json",i.setRequestHeader("X-Authentication-Token",localStorage.authToken),i.onload=function(){"err"in i.response?o(i.response.err):n(i.response)},i.send(t)})}e.exports={get:o,put:i,post:r}},function(e,t,n){var o=n(21),i=n(23),r=function(){this.image=o("img"),this.cache={},this.queue=[],this.image.addEventListener("load",this.moveQueue.bind(this)),this.image.addEventListener("error",this.moveQueue.bind(this)),this.moveQueue()};r.prototype.add=function(e){e in this.cache||(this.cache[e]=!0,this.queue.push(e))},r.prototype.moveQueue=function(){var e=this.queue.pop();void 0!==e?this.image.src=e:setTimeout(this.moveQueue.bind(this),250)};var s=function(){this.imageStab="https://cdnjs.cloudflare.com/ajax/libs/galleriffic/2.0.1/css/loader.gif",this.lightBoxImage=o("img.light-box-img",{src:this.imageStab}),this.lightBox=o(".frf-co-light-box.first.last.hidden",o(".light-box-shadow",o(".light-box-container",this.lightBoxImage),o(".light-box-arrow.left"),o(".light-box-arrow.right"))),this.cList=this.lightBox.classList,this.preloader=new r,this.hidden=!0,this.slides=[],this.index=0,document.body.appendChild(this.lightBox),document.body.addEventListener("keydown",function(e){this.hidden||(27==e.keyCode?this.hide():39==e.keyCode?(this.next(),e.preventDefault()):37==e.keyCode?(this.prev(),e.preventDefault()):36==e.keyCode?(this.first(),e.preventDefault()):35==e.keyCode&&(this.last(),e.preventDefault()))}.bind(this),!0),this.lightBox.addEventListener("click",function(e){var t;null!==(t=i(e.target,".light-box-arrow",!0))?(e.stopPropagation(),t.classList.contains("left")?this.prev():t.classList.contains("right")&&this.next()):i(e.target,".light-box-shadow",!0)&&this.hide()}.bind(this)),this.lightBoxImage.addEventListener("click",function(){window.open(this.slides[this.index].href,"_blank")}.bind(this))};s.prototype.isFirst=function(){return 0===this.index},s.prototype.isLast=function(){return this.index===this.slides.length-1},s.prototype.show=function(e,t){this.slides=e,e.forEach(function(e,n){e===t?this.index=n:this.preloader.add(e.dataset.imageSrc)}.bind(this)),this.hidden=!1,this.cList.remove("hidden"),this._showCurrent()},s.prototype._showCurrent=function(){this.lightBoxImage.src=this.imageStab,this.lightBoxImage.src=this.slides[this.index].dataset.imageSrc,this.lightBoxImage.style="",this.isFirst()?this.cList.add("first"):this.cList.remove("first"),this.isLast()?this.cList.add("last"):this.cList.remove("last")},s.prototype.hide=function(){this.hidden||(this.hidden=!0,this.cList.add("hidden"))},s.prototype.next=function(){this.hidden||this.isLast()||(this.index++,this._showCurrent())},s.prototype.prev=function(){this.hidden||this.isFirst()||(this.index--,this._showCurrent())},s.prototype.first=function(){this.hidden||this.isFirst()||(this.index=0,this._showCurrent())},s.prototype.last=function(){this.hidden||this.isLast()||(this.index=this.slides.length-1,this._showCurrent())},e.exports=s},function(e,t,n){var o=n(31);"string"==typeof o&&(o=[[e.id,o,""]]);n(27)(o,{});o.locals&&(e.exports=o.locals)},function(e,t,n){t=e.exports=n(37)(),t.push([e.id,".date.be-fe-iconized{position:relative}.date.be-fe-iconized .icon{position:absolute;top:0;left:0;z-index:1}.date.be-fe-iconized .icon.be-fe-ico-bg{z-index:0}.be-fe-ico-bg{color:#fff}.be-fe-comment-from-reader .be-fe-ico-bg{color:#ededed}.be-fe-comment-from-friend .be-fe-ico-bg{color:#cef4fc}.be-fe-comment-from-post-author .be-fe-ico-bg{color:#b5b5b5}.be-fe-comment-from-me .be-fe-ico-bg{color:#ffd061}",""])},function(e,t,n){var o=n(33);"string"==typeof o&&(o=[[e.id,o,""]]);n(27)(o,{});o.locals&&(e.exports=o.locals)},function(e,t,n){t=e.exports=n(37)(),t.push([e.id,".comments .comment a.date{display:inline-block;width:16px;height:20px;transition:transform .2s}.comments .comment a.date:hover{transform:scale(2);transition:transform .2s 1s;z-index:1}a.date .icon{display:none}a.date .be-fe-userpic{width:16px;height:16px;border-radius:2px}.comments .comment{min-height:17px}",""])},function(e,t,n){function o(e){return i.get("/v1/users/"+e).then(function(e){var t=e.users.profilePictureMediumUrl;return t&&""!==t?t:s})}var i=n(28),r=n(39),s="https://freefeed.net/img/default-userpic-48.png",a={};e.exports={getPic:function(e){return e in a||(a[e]=o(e)),a[e]},setPic:function(e,t){a[e]=r.resolve(t&&""!==t?t:s)}}},function(e,t,n){var o=n(36);"string"==typeof o&&(o=[[e.id,o,""]]);n(27)(o,{});o.locals&&(e.exports=o.locals)},function(e,t,n){t=e.exports=n(37)(),t.push([e.id,"a.date{border-bottom:2px solid transparent}.be-fe-comment-from-reader a.date{border-bottom-color:#ccc}.be-fe-comment-from-friend a.date{border-bottom-color:#5cd4f0}.be-fe-comment-from-post-author a.date{border-bottom-color:#666}.be-fe-comment-from-me a.date{border-bottom-color:#ffb811}",""])},function(e,t,n){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var n=this[t];e.push(n[2]?"@media "+n[2]+"{"+n[1]+"}":n[1])}return e.join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var o={},i=0;i<this.length;i++){var r=this[i][0];"number"==typeof r&&(o[r]=!0)}for(i=0;i<t.length;i++){var s=t[i];"number"==typeof s[0]&&o[s[0]]||(n&&!s[2]?s[2]=n:n&&(s[2]="("+s[2]+") and ("+n+")"),e.push(s))}},e}},function(e,t,n){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},function(e,t,n){function o(e){var t=e.length,n=new Array(e.length);return new Promise(function(o,i){e.forEach(function(e,r){e.then(function(e){n[r]=e,t--,0===t&&o(n)},function(e){i(e)})})})}function i(e){return new Promise(function(t,n){t(e)})}e.exports={all:o,resolve:i}}]);